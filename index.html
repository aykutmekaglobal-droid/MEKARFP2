<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEKA - Crushing & Screening Plant Request For Proposal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/proxima-nova" rel="stylesheet">
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #0056b3;
            /* Meka Blue */
            --accent: #ffb400;
            /* Meka Yellow/Gold */
            --text-main: #2d3436;
            --text-muted: #636e72;
            --bg-body: #f8f9fa;
            --bg-card: #ffffff;
            --border: #dee2e6;
            --input-bg: #ffffff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --section-indicator: #ff9f43;
            --section-bg: #fffbf5;
            /* Very Light Orange */
            --header-bg: #fff3e6;
            /* Soft Header Orange */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Proxima Nova', sans-serif;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(0, 86, 179, 0.03) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 180, 0, 0.03) 0%, transparent 40%);
            background-attachment: fixed;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background: var(--primary);
            padding: 15px 0;
            margin-bottom: 15px;
            border-bottom: 5px solid var(--accent);
            width: 100%;
        }

        .header-content {
            max-width: 720px;
            margin: 0 auto;
            padding: 0 10px;
            text-align: center;
        }

        .logo {
            font-family: 'Proxima Nova', sans-serif;
            font-size: 2.2rem;
            font-weight: 800;
            color: #fff;
            letter-spacing: 2px;
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
            line-height: 1;
            text-transform: uppercase;
        }

        .logo span {
            color: var(--secondary);
        }

        .header-title {
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }

        .main-title {
            font-size: 1.6rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--primary);
            font-weight: 800;
        }

        .sub-title {
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-muted);
            font-weight: 400;
        }

        .form-section {
            background: var(--section-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            border-left: 4px solid var(--section-indicator);
            padding-left: 10px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 8px;
        }

        label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-main);
            margin-bottom: 3px;
            font-weight: 600;
        }

        .required-star {
            color: #d63031;
            font-weight: bold;
            margin-left: 4px;
        }

        /* Keep the old rule only for simple labels that don't use the span method yet */
        label.required::after {
            content: " *";
            color: #d63031;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"] {
            width: 100%;
            max-width: 100%;
            padding: 5px 8px;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-main);
            font-size: 0.78rem;
            transition: all 0.2s;
        }

        textarea {
            width: 100%;
            max-width: 100%;
            padding: 5px 8px;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-main);
            font-size: 0.78rem;
            transition: all 0.2s;
            resize: none;
            min-height: 50px;
        }

        input:focus,
        textarea:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
            outline: none;
        }

        /* Prevent autofill blue background */
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        textarea:-webkit-autofill,
        textarea:-webkit-autofill:hover,
        textarea:-webkit-autofill:focus {
            -webkit-text-fill-color: var(--text-main);
            -webkit-box-shadow: 0 0 0px 1000px #ffffff inset;
            transition: background-color 5000s ease-in-out 0s;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 6px;
            margin-bottom: 6px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            padding: 5px 8px;
            border: 1px solid var(--border);
            border-radius: 5px;
            transition: all 0.2s;
            background: #fff;
            font-size: 0.8rem;
        }

        .checkbox-item:hover {
            border-color: var(--secondary);
            background: rgba(0, 86, 179, 0.02);
        }

        .checkbox-item input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 17px;
            height: 17px;
            border: 2px solid var(--border);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            background: #fff;
            flex-shrink: 0;
        }

        .checkbox-item input[type="checkbox"]:checked {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .checkbox-item input[type="checkbox"]:checked::after {
            content: '‚úì';
            color: #fff;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            font-weight: bold;
        }

        .checkbox-item.selected {
            border-color: var(--secondary);
            background: rgba(0, 86, 179, 0.05);
        }

        /* Hover Preview Styles */
        .checkbox-item.has-preview {
            position: relative;
        }

        .preview-image {
            position: absolute;
            left: 105%;
            top: 50%;
            transform: translateY(-50%);
            width: 200px;
            /* Reduced by ~40% for more compact look */
            z-index: 1000;
            background: #fff;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
            pointer-events: none;
            border: 1px solid var(--border);
        }

        .preview-image img {
            width: 100%;
            border-radius: 8px;
            display: block;
        }

        .checkbox-item.has-preview:hover .preview-image {
            opacity: 1;
            visibility: visible;
            left: 108%;
        }

        @media (max-width: 900px) {
            .preview-image {
                width: 250px;
                left: 0;
                top: 110%;
                transform: none;
            }

            .checkbox-item.has-preview:hover .preview-image {
                left: 0;
                top: 105%;
            }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: #fff;
        }

        th {
            background: var(--header-bg);
            color: var(--primary);
            padding: 6px;
            font-size: 0.68rem;
            text-align: center;
            text-transform: uppercase;
            border: 1px solid var(--border);
            white-space: nowrap;
        }

        th span.unit,
        .header-label span.unit,
        label span.unit {
            text-transform: none;
            text-transform: lowercase;
            font-weight: 500;
        }

        th span.subtitle {
            display: block;
            font-size: 0.65rem;
            color: #ef6c00;
            /* Meka Orange/Amber */
            text-transform: none;
            font-weight: 400;
            margin-top: 4px;
            letter-spacing: 0;
        }

        .subtitle-inline {
            font-size: 0.7rem;
            color: #ef6c00;
            text-transform: none;
            font-weight: 500;
            margin-left: 8px;
            vertical-align: middle;
        }

        .header-label {
            display: block;
            background: var(--header-bg);
            color: var(--primary);
            padding: 6px;
            font-size: 0.68rem;
            font-weight: 700;
            text-align: center;
            text-transform: uppercase;
            border: 1px solid var(--border);
            margin-bottom: 0 !important;
            white-space: nowrap;
        }

        td {
            padding: 4px 6px;
            border: 1px solid var(--border);
            font-size: 0.78rem;
            color: var(--text-main);
        }

        table tbody tr td:first-child {
            font-weight: 600;
            color: var(--text-main);
        }

        .feeding-table thead td {
            border-bottom: none;
        }

        .feeding-table tbody td {
            border-top: none;
        }

        table input,
        table select,
        input[name="max_feed_size"],
        input[name="spec_density"],
        input[name="bulk_density"],
        input[name="impact_index"],
        input[name="abrasion_index"],
        input[name="moisture"] {
            text-align: center;
            font-size: 0.78rem;
        }

        table input,
        table select {
            border: 1px solid #e9ecef !important;
            padding: 5px 3px !important;
            /* Reduced horizontal padding */
            width: 100%;
            box-sizing: border-box;
            /* Ensure padding doesn't expand width */
            border-radius: 4px;
            background: #fdfdfd;
            transition: all 0.2s;
            font-size: 0.8rem;
            color: var(--text-main);
            text-align: center;
            /* Center the values */
        }

        table input:focus,
        table select:focus {
            border-color: var(--secondary) !important;
            background: #fff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
        }

        /* Remove arrows from number inputs */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield;
        }

        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            border: none;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #004494;
            box-shadow: 0 4px 12px rgba(0, 86, 179, 0.2);
        }

        .btn-secondary {
            background: #fff;
            color: var(--text-main);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: #f8f9fa;
        }

        @media print {
            @page {
                margin: 1.5cm;
            }

            body {
                background: white;
                padding: 0;
                zoom: 0.70;
            }

            .container {
                max-width: 100%;
                padding: 0;
                margin: 0;
                box-shadow: none;
            }

            .switcher-container,
            .actions {
                display: none !important;
            }

            header {
                display: block !important;
                margin-bottom: 12px !important;
                padding: 10px 0 !important;
                background: var(--primary) !important;
                border-bottom: 5px solid var(--accent) !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                width: 100% !important;
            }

            .header-content {
                max-width: 100% !important;
                padding: 0 10px !important;
                margin: 0 auto !important;
                text-align: center !important;
            }

            .logo {
                font-family: 'Proxima Nova', sans-serif !important;
                font-size: 2.5rem !important;
                font-weight: 800 !important;
                color: #fff !important;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
                letter-spacing: 2px !important;
                line-height: 1 !important;
            }

            .form-section {
                box-shadow: none !important;
                border: 1px solid #cbd5e1 !important;
                background: var(--section-bg) !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                margin-bottom: 15px !important;
                padding: 15px !important;
                page-break-inside: auto !important;
            }

            .feeding-size-container {
                page-break-inside: avoid !important;
                display: block !important;
            }

            .section-title {
                page-break-after: avoid !important;
            }

            .grid-2 {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 10px !important;
                page-break-inside: avoid !important;
            }

            .input-group {
                margin-bottom: 8px !important;
                page-break-inside: avoid !important;
            }

            /* Ensure long textareas take full width if they are outside a grid-2 or deliberate */
            textarea[name="address"],
            textarea[name="current_status_needs"],
            textarea[name="comments"] {
                width: 100% !important;
            }

            input::placeholder,
            textarea::placeholder {
                color: transparent !important;
            }

            input,
            textarea,
            select {
                border: 1px solid #ddd !important;
                background: #ffffff !important;
                padding: 5px 10px !important;
                font-size: 0.85rem !important;
                color: #000 !important;
                border-radius: 4px !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            /* Force remove autofill color in print */
            input:-webkit-autofill,
            textarea:-webkit-autofill {
                -webkit-box-shadow: 0 0 0px 1000px #ffffff inset !important;
                -webkit-text-fill-color: #000 !important;
            }

            .checkbox-group {
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 5px !important;
            }

            .checkbox-item {
                border: 1px solid #eee !important;
                background: #fff !important;
                padding: 4px 8px !important;
                border-radius: 4px !important;
                font-size: 0.78rem !important;
            }

            .header-label,
            th {
                background: var(--header-bg) !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                color: #0f172a !important;
                border: 1px solid #cbd5e1 !important;
            }

            .unit {
                color: #444 !important;
            }

            .no-print {
                display: none !important;
            }

            .print-header-line,
            .print-footer-line {
                display: block !important;
                position: fixed;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--primary) !important;
                z-index: 9999;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            .print-header-line {
                top: 0;
            }

            .print-footer-line {
                bottom: 0;
            }
        }

        .print-header-line,
        .print-footer-line {
            display: none;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .grid-2.divider {
            gap: 20px;
        }

        .grid-2.divider>div:first-child {
            border-right: 1px solid var(--border);
            padding-right: 20px;
        }

        @media (max-width: 768px) {

            .grid-2,
            .grid-2.divider {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .grid-2.divider>div:first-child {
                border-right: none;
                border-bottom: 1px solid var(--border);
                padding-right: 0;
                padding-bottom: 20px;
            }
        }

        /* Language & Unit Switcher Styles */
        .switcher-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            margin-bottom: 10px;
        }

        .lang-switcher,
        .unit-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .lang-btn,
        .unit-btn {
            padding: 4px 10px;
            border: 1px solid var(--border);
            background: #fff;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.7rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .lang-btn:hover,
        .unit-btn:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .lang-btn.active,
        .unit-btn.active {
            background: var(--secondary);
            color: #fff;
            border-color: var(--secondary);
        }

        /* RTL Support for Arabic */
        [dir="rtl"] {
            text-align: right;
        }

        [dir="rtl"] .section-title {
            border-left: none;
            border-right: 4px solid var(--secondary);
            padding-left: 0;
            padding-right: 15px;
        }

        [dir="rtl"] th {
            text-align: right;
        }

        [dir="rtl"] .grid-2.divider>div:first-child {
            border-right: none;
            border-left: 1px solid var(--border);
            padding-right: 0;
            padding-left: 40px;
        }

        [dir="rtl"] .actions {
            justify-content: flex-start;
        }
    </style>
</head>

<body dir="ltr">
    <div class="print-header-line"></div>
    <div class="print-footer-line"></div>
    <header>
        <div class="header-content">
            <div class="logo">MEKA</div>
        </div>
    </header>

    <div class="container">

        <div class="switcher-container">
            <div class="lang-switcher">
                <button type="button" class="lang-btn active" onclick="setLanguage('en')">üá¨üáß English</button>
                <button type="button" class="lang-btn" onclick="setLanguage('tr')">üáπüá∑ T√ºrk√ße</button>
                <button type="button" class="lang-btn" onclick="setLanguage('fr')">üá´üá∑ Fran√ßais</button>
                <button type="button" class="lang-btn" onclick="setLanguage('es')">üá™üá∏ Espa√±ol</button>
                <button type="button" class="lang-btn" onclick="setLanguage('ar')">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
            </div>
            <div class="unit-switcher">
                <button type="button" class="unit-btn active" onclick="setUnitSystem('metric')">üìè Metric</button>
                <button type="button" class="unit-btn" onclick="setUnitSystem('imperial')">üìè Imperial</button>
            </div>
        </div>

        <form id="proposalForm">
            <!-- Customer Section -->
            <section class="form-section">
                <div class="section-title" data-i18n="sec_customer">Customer Details</div>
                <div class="grid-2">
                    <div class="input-group">
                        <label class="required" data-i18n="lbl_company">Company Name</label>
                        <input type="text" name="company" required>
                    </div>
                    <div class="input-group">
                        <label data-i18n="lbl_project_name">Project Name</label>
                        <input type="text" name="project_name">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="input-group">
                        <label class="required" data-i18n="lbl_responsible">Contact Name</label>
                        <input type="text" name="responsible" required>
                    </div>
                    <div class="input-group">
                        <label class="required" data-i18n="lbl_phone">Phone / WhatsApp</label>
                        <input type="tel" name="phone" required>
                    </div>
                </div>
                <div class="input-group">
                    <label data-i18n="lbl_location">Site Location</label>
                    <input type="text" name="location">
                </div>
                <div class="input-group">
                    <label class="required" data-i18n="lbl_email">Email Address</label>
                    <input type="email" name="email" required>
                </div>
                <div class="input-group">
                    <label data-i18n="lbl_address">Full Address</label>
                    <textarea name="address" rows="2" style="overflow: hidden;" data-max-lines="2"></textarea>
                </div>
            </section>

            <!-- Project Type & Mobility -->
            <section class="form-section">
                <div class="section-title" data-i18n="sec_scope">Project Scope & Mobility</div>
                <div class="grid-2 divider">
                    <div class="input-group">
                        <label class="header-label required" data-i18n="lbl_project_type">Project Type</label>
                        <div
                            style="border: 1px solid var(--border); border-top: none; padding: 20px; background: #fff; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
                            <div class="checkbox-group single-select-group required-group"
                                data-group-name="Project Type" data-i18n-group="Project Type"
                                style="grid-template-columns: 1fr; margin-bottom: 0;">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="project_type" value="New"> <span
                                        data-i18n="val_new_plant">New Plant</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="project_type" value="Extension"> <span
                                        data-i18n="val_extension">Plant Extension</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="project_type" value="Renewal"> <span
                                        data-i18n="val_renewal">Plant Renewal</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="header-label required" data-i18n="lbl_mobility">Project Mobility</label>
                        <div
                            style="border: 1px solid var(--border); border-top: none; padding: 20px; background: #fff; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
                            <div class="checkbox-group single-select-group required-group"
                                data-group-name="Project Mobility" data-i18n-group="Project Mobility"
                                style="grid-template-columns: 1fr; margin-bottom: 0;">
                                <label class="checkbox-item has-preview">
                                    <input type="checkbox" name="mobility" value="Stationary"> <span
                                        data-i18n="val_stationary">Stationary</span>
                                    <div class="preview-image">
                                        <img src="images/stationary.jpg" alt="Stationary Preview">
                                    </div>
                                </label>
                                <label class="checkbox-item has-preview">
                                    <input type="checkbox" name="mobility" value="Mobile"> <span
                                        data-i18n="val_mobile">Mobile-Wheeled</span>
                                    <div class="preview-image">
                                        <img src="images/mobile-wheeled.jpg" alt="Mobile-Wheeled Preview">
                                    </div>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="mobility" value="Skid"> <span data-i18n="val_skid">Skid
                                        Mounted</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Feed Material -->
            <section class="form-section">
                <div class="section-title required" data-i18n="sec_feed">Feed Material Characteristics</div>
                <div class="checkbox-group single-select-group required-group" data-group-name="Feed Material"
                    data-i18n-group="Feed Material" style="margin-bottom: 20px;">
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Granite"> <span
                            data-i18n="val_granite">Granite</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Limestone"> <span
                            data-i18n="val_limestone">Limestone</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Gabbro"> <span
                            data-i18n="val_gabbro">Gabbro</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Quartzite"> <span
                            data-i18n="val_quartzite">Quartzite</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Sandstone"> <span
                            data-i18n="val_sandstone">Sandstone</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Dolomite"> <span
                            data-i18n="val_dolomite">Dolomite</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Diabase"> <span
                            data-i18n="val_diabase">Diabase</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Marble"> <span
                            data-i18n="val_marble">Marble</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Andesite"> <span
                            data-i18n="val_andesite">Andesite</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="Coal"> <span
                            data-i18n="val_coal">Coal</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="material" value="River Gravel"> <span
                            data-i18n="val_river_gravel">River Gravel</span></label>
                </div>
                <div class="input-group" style="margin-top: 10px;">
                    <label data-i18n="lbl_other_material">Other material (Please specify)</label>
                    <input type="text" name="other_material">
                </div>

                <div class="grid-2 divider" style="margin-top: 25px; align-items: start;">
                    <div>
                        <div style="overflow-x: auto;">
                            <table style="margin-top: 0;">
                                <thead>
                                    <tr>
                                        <th data-i18n="th_tech_param">Technical Parameter</th>
                                        <th data-i18n="th_value">Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span data-i18n="td_spec_density">Specific Density</span> <span class="unit"
                                                data-unit="density">(t/m¬≥)</span></td>
                                        <td><input type="text" name="spec_density"></td>
                                    </tr>
                                    <tr>
                                        <td><span data-i18n="td_bulk_density">Bulk Density</span> <span class="unit"
                                                data-unit="density">(t/m¬≥)</span></td>
                                        <td><input type="text" name="bulk_density"></td>
                                    </tr>
                                    <tr>
                                        <td data-i18n="td_impact_index">Impact Work Index (Bond)</td>
                                        <td><input type="text" name="impact_index"></td>
                                    </tr>
                                    <tr>
                                        <td data-i18n="td_abrasion_index">Abrasion Index</td>
                                        <td><input type="text" name="abrasion_index"></td>
                                    </tr>
                                    <tr>
                                        <td data-i18n="td_moisture">Moisture % by Weight</td>
                                        <td><input type="text" name="moisture"></td>
                                    </tr>
                                    <tr>
                                        <td data-i18n="td_others">Others</td>
                                        <td><input type="text" name="others_tech"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="input-group" style="margin-top: 25px;">
                            <label class="header-label"><span data-i18n="lbl_max_feed">Max Feed Size</span>
                                <span class="unit" data-unit="mm">(mm)</span><span
                                    class="required-star">*</span></label>
                            <div
                                style="border: 1px solid var(--border); border-top: none; padding: 15px; background: #fff; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
                                <input type="text" name="max_feed_size" style="margin: 0;" required>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="input-group">
                            <label class="header-label"><span data-i18n="lbl_extraction">Extraction Method</span><span
                                    class="required-star">*</span></label>
                            <div class="checkbox-group single-select-group required-group"
                                data-group-name="Extraction Method"
                                style="grid-template-columns: repeat(2, 1fr); border: 1px solid var(--border); border-top: none; padding: 20px; background: #fff; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
                                <label class="checkbox-item"><input type="checkbox" name="extraction" value="Blasting">
                                    <span data-i18n="val_blasting">Blasting</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="extraction" value="Ripped">
                                    <span data-i18n="val_ripped">Ripped</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="extraction" value="Recycling">
                                    <span data-i18n="val_recycling">Recycling</span></label>
                                <label class="checkbox-item"><input type="checkbox" name="extraction"
                                        value="River Gravel">
                                    <span data-i18n="val_river_gravel">River Gravel</span></label>
                            </div>
                        </div>

                        <div class="input-group" style="margin-top: 25px;">
                            <label class="header-label"><span data-i18n="lbl_condition">Feed Material
                                    Condition</span><span class="required-star">*</span></label>
                            <div
                                style="border: 1px solid var(--border); border-top: none; padding: 12px; background: #fff; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;">
                                <div class="checkbox-group single-select-group required-group"
                                    data-group-name="Feed Material Condition"
                                    style="grid-template-columns: repeat(2, 1fr); margin-bottom: 8px;">
                                    <label class="checkbox-item"><input type="checkbox" name="condition" value="Wet">
                                        <span data-i18n="val_wet">Wet</span></label>
                                    <label class="checkbox-item"><input type="checkbox" name="condition" value="Dry">
                                        <span data-i18n="val_dry">Dry</span></label>
                                    <label class="checkbox-item"><input type="checkbox" name="condition" value="Clayed">
                                        <span data-i18n="val_clayed">Clayed</span></label>
                                    <label class="checkbox-item"><input type="checkbox" name="condition" value="Sticky">
                                        <span data-i18n="val_sticky">Sticky</span></label>
                                </div>
                                <label data-i18n="lbl_comments"
                                    style="display: block; margin-bottom: 3px; font-size: 0.78rem; font-weight: 600; color: var(--text-main);">Comments</label>
                                <textarea name="feed_comments" rows="2"
                                    style="width: 100%; padding: 5px 8px; border: 1px solid var(--border); border-radius: 4px; resize: none; font-size: 0.78rem; overflow: hidden;"
                                    data-max-lines="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="feeding-size-container" style="overflow-x: auto; margin-top: 25px;">
                    <label class="header-label">
                        <span data-i18n="lbl_feed_dist">Feeding Size Distribution</span>
                        <span class="subtitle-inline" data-i18n="sub_if_available">(If available)</span>
                    </label>
                    <table class="feeding-table" style="margin-top: 0;">
                        <thead>
                            <tr>
                                <th style="font-size: 0.75rem; min-width: 100px;"><span data-i18n="th_mesh">Hole
                                        Size</span>
                                    <span class="unit" data-unit="mm">(mm)</span>
                                </th>
                                <td><input type="text" name="h1"></td>
                                <td><input type="text" name="h2"></td>
                                <td><input type="text" name="h3"></td>
                                <td><input type="text" name="h4"></td>
                                <td><input type="text" name="h5"></td>
                                <td><input type="text" name="h6"></td>
                                <td><input type="text" name="h7"></td>
                                <td><input type="text" name="h8"></td>
                                <td><input type="text" name="h9"></td>
                                <td><input type="text" name="h10"></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th style="font-size: 0.75rem; min-width: 100px;"><span
                                        data-i18n="th_passing">Passing</span> <span class="unit">(%)</span>
                                </th>
                                <td><input type="text" name="p1"></td>
                                <td><input type="text" name="p2"></td>
                                <td><input type="text" name="p3"></td>
                                <td><input type="text" name="p4"></td>
                                <td><input type="text" name="p5"></td>
                                <td><input type="text" name="p6"></td>
                                <td><input type="text" name="p7"></td>
                                <td><input type="text" name="p8"></td>
                                <td><input type="text" name="p9"></td>
                                <td><input type="text" name="p10"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Final Product Details -->
            <section class="form-section">
                <div class="section-title" data-i18n="sec_final">
                    Required Final Products
                    <span class="subtitle-inline" data-i18n="sub_specify_size"
                        style="font-size: 0.8rem; letter-spacing: 0;">Please specify required final product size</span>
                </div>
                <div style="overflow-x: auto;">
                    <table class="hide-if-empty">
                        <thead>
                            <tr>
                                <th data-i18n="th_prod_name">Product Name</th>
                                <th><span data-i18n="th_size">Size</span> <span class="unit" data-unit="mm">(mm)</span>
                                </th>
                                <th><span data-i18n="th_capacity">Capacity</span> <span class="unit"
                                        data-unit="capacity">(mtph)</span><span class="subtitle"
                                        data-i18n="sub_available">Please add the
                                        values if available</span></th>
                                <th><span data-i18n="th_percentage">Percentage</span> (%)<span class="subtitle"
                                        data-i18n="sub_available">Please add the values if available</span></th>
                                <th><span data-i18n="th_shape">Quality of Product</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span data-i18n="val_prod">Product</span> 1 <span style="color: #d63031;">*</span>
                                </td>
                                <td><input type="text" name="p1s" required></td>
                                <td><input type="text" name="p1w"></td>
                                <td><input type="text" name="p1p"></td>
                                <td>
                                    <select name="p1sh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td><span data-i18n="val_prod">Product</span> 2</td>
                                <td><input type="text" name="p2s"></td>
                                <td><input type="text" name="p2w"></td>
                                <td><input type="text" name="p2p"></td>
                                <td>
                                    <select name="p2sh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td><span data-i18n="val_prod">Product</span> 3</td>
                                <td><input type="text" name="p3s"></td>
                                <td><input type="text" name="p3w"></td>
                                <td><input type="text" name="p3p"></td>
                                <td>
                                    <select name="p3sh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td><span data-i18n="val_prod">Product</span> 4</td>
                                <td><input type="text" name="p4s"></td>
                                <td><input type="text" name="p4w"></td>
                                <td><input type="text" name="p4p"></td>
                                <td>
                                    <select name="p4sh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td><span data-i18n="val_prod">Product</span> 5</td>
                                <td><input type="text" name="p5s"></td>
                                <td><input type="text" name="p5w"></td>
                                <td><input type="text" name="p5p"></td>
                                <td>
                                    <select name="p5sh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td data-i18n="val_natural">Natural Fine</td>
                                <td><input type="text" name="nfs"></td>
                                <td><input type="text" name="nfw"></td>
                                <td><input type="text" name="nfp"></td>
                                <td>
                                    <select name="nfsh">
                                        <option value="Not Required" data-i18n="val_not_required">Not Required</option>
                                        <option value="Required" data-i18n="val_required">Required</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="input-group" style="margin-top: 20px;">
                    <label data-i18n="lbl_comments">Comments</label>
                    <textarea name="comments" rows="3" style="overflow: hidden;" data-max-lines="3"></textarea>
                </div>
            </section>

            <div class="actions">
                <button type="button" class="btn btn-secondary" onclick="handlePrint()" data-i18n="btn_print">Print /
                    Save PDF</button>
                <button type="submit" class="btn btn-primary" data-i18n="btn_submit">Submit Inquiry</button>
            </div>
        </form>
    </div>

    <script>
        // Logic for single-select checkboxes within groups
        document.querySelectorAll('.single-select-group').forEach(group => {
            const checkboxes = group.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => {
                cb.addEventListener('change', function () {
                    if (this.checked) {
                        checkboxes.forEach(otherCb => {
                            if (otherCb !== this) {
                                otherCb.checked = false;
                                otherCb.parentElement.classList.remove('selected');
                            }
                        });
                        this.parentElement.classList.add('selected');
                    } else {
                        this.parentElement.classList.remove('selected');
                    }
                });
            });
        });



        let originalTitle = document.title;

        function handlePrint() {
            const form = document.getElementById('proposalForm');

            // Check HTML5 validation (required inputs)
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Set dynamic filename for PDF: RFP_MEKA_CompanyName_Date
            const companyInput = document.querySelector('input[name="company"]');
            const companyName = companyInput ? companyInput.value.trim() : "";
            const now = new Date();
            const dateStr = `${String(now.getDate()).padStart(2, '0')}-${String(now.getMonth() + 1).padStart(2, '0')}-${now.getFullYear()}`;
            originalTitle = document.title;
            const fileName = companyName ? `RFP_MEKA_${companyName}_${dateStr}` : `RFP_MEKA_${dateStr}`;
            document.title = fileName;

            // Check required checkbox groups
            const requiredGroups = document.querySelectorAll('.required-group');
            for (const group of requiredGroups) {
                const checked = group.querySelectorAll('input[type="checkbox"]:checked');
                if (checked.length === 0) {
                    const groupName = group.getAttribute('data-group-name') || 'Selection Group';
                    const alertMsg = translations[currentLang]?.alert_select || 'Please select at least one option for: ';
                    alert(`${alertMsg}${groupName}`);
                    group.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }
            }

            // Hide empty rows IN SPECIFIC TABLES (like Required Final Products) for cleaner print
            document.querySelectorAll('table.hide-if-empty tbody tr').forEach(row => {
                const inputs = row.querySelectorAll('input, select');
                if (inputs.length > 0) {
                    let hasVisibleValue = false;
                    inputs.forEach(input => {
                        const val = input.value.trim();
                        if (val !== "" && val !== "Not Required") {
                            hasVisibleValue = true;
                        }
                    });

                    if (!hasVisibleValue) {
                        // Special check: don't hide the row if it's the only one or has required field that's somehow missed
                        const isRequiredRow = row.querySelector('[required]');
                        if (!isRequiredRow) {
                            row.classList.add('no-print');
                        }
                    }
                }
            });

            window.print();
        }

        // Cleanup after print
        window.addEventListener('afterprint', () => {
            if (originalTitle) document.title = originalTitle;
            document.querySelectorAll('.no-print').forEach(el => el.classList.remove('no-print'));
        });

        // Form Submission
        document.getElementById('proposalForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const msg = translations[currentLang]?.alert_submit || 'Form simulation successful.';
            alert(msg);
        });

        const translations = {
            en: {
                header_main_title: "Request for Proposal",
                header_sub_title: "Crushing & Screening Plant",
                sec_customer: "Customer Details",
                lbl_company: "Company Name",
                lbl_project_name: "Project Name",
                lbl_responsible: "Contact Name",
                lbl_phone: "Phone",
                lbl_location: "Site Location",
                lbl_email: "Email Address",
                lbl_address: "Full Address",
                sec_scope: "Project Type & Mobility",
                lbl_project_type: "Project Type",
                val_new_plant: "New Plant",
                val_extension: "Plant Extension",
                val_renewal: "Plant Renewal",
                lbl_status_needs: "Please describe your current status and needs",
                lbl_mobility: "Project Mobility",
                val_stationary: "Stationary",
                val_mobile: "Mobile-Wheeled",
                val_skid: "Skid Mounted",
                sec_feed: "Feed Material Characteristics",
                val_granite: "Granite",
                val_limestone: "Limestone",
                val_gabbro: "Gabbro",
                val_quartzite: "Quartzite",
                val_sandstone: "Sandstone",
                val_dolomite: "Dolomite",
                val_diabase: "Diabase",
                val_marble: "Marble",
                val_andesite: "Andesite",
                val_coal: "Coal",
                val_river_gravel: "River Gravel",
                lbl_other_material: "Other material (Please specify)",
                th_tech_param: "Technical Parameter",
                th_value: "Value",
                td_spec_density: "Specific Density",
                td_bulk_density: "Bulk Density",
                td_impact_index: "Impact Work Index (Bond)",
                td_abrasion_index: "Abrasion Index",
                td_moisture: "Moisture % by Weight",
                td_others: "Others",
                lbl_extraction: "Extraction Method",
                val_blasting: "Blasting",
                val_ripped: "Ripped",
                val_recycling: "Recycling",
                lbl_condition: "Feed Material Condition",
                val_wet: "Wet",
                val_dry: "Dry",
                val_clayed: "Clayed",
                val_sticky: "Sticky",
                lbl_max_feed: "Max Feed Size",
                lbl_feed_dist: "Feeding Size Distribution",
                th_mesh: "Hole Size",
                th_passing: "Passing",
                sec_final: "Required Final Products",
                th_prod_name: "Product Name",
                th_size: "Size",
                th_capacity: "Capacity",
                th_percentage: "Percentage",
                th_shape: "Quality of Product",
                sub_available: "Please add the values if available",
                val_prod: "Product",
                val_natural: "Natural Fine",
                val_required: "Required",
                val_not_required: "Not Required",
                lbl_comments: "Comments",
                btn_print: "Print / Save PDF",
                btn_submit: "Submit Inquiry",
                alert_select: "Please select at least one option for: ",
                alert_submit: "Form simulation successful.",
                msg_required: "Please fill out this field.",
                sub_if_available: "(If available)",
                sub_specify_size: "Please specify required final product size"
            },
            tr: {
                header_main_title: "Teklif Talebi",
                header_sub_title: "Kƒ±rma ve Eleme Tesisi",
                sec_customer: "M√º≈üteri Bilgileri",
                lbl_company: "≈ûirket Adƒ±",
                lbl_project_name: "Proje Adƒ±",
                lbl_responsible: "ƒ∞lgili Ki≈üi",
                lbl_phone: "Telefon",
                lbl_location: "Saha Konumu",
                lbl_email: "E-posta Adresi",
                lbl_address: "Tam Adres",
                sec_scope: "Proje Tipi ve Mobilite",
                lbl_project_type: "Proje Tipi",
                val_new_plant: "Yeni Tesis",
                val_extension: "Tesis Kapasite Artƒ±≈üƒ±",
                val_renewal: "Tesis Yenileme",
                lbl_status_needs: "Mevcut durumunuzu ve ihtiya√ßlarƒ±nƒ±zƒ± l√ºtfen a√ßƒ±klayƒ±nƒ±z",
                lbl_mobility: "Proje Mobilitesi",
                val_stationary: "Sabit",
                val_mobile: "Mobil-Tekerlekli",
                val_skid: "Kƒ±zaklƒ±",
                sec_feed: "Besleme Malzemesi √ñzellikleri",
                val_granite: "Granit",
                val_limestone: "Kire√ßta≈üƒ±",
                val_gabbro: "Gabro",
                val_quartzite: "Kuvarsit",
                val_sandstone: "Kumta≈üƒ±",
                val_dolomite: "Dolomit",
                val_diabase: "Diyabaz",
                val_marble: "Mermer",
                val_andesite: "Andezit",
                val_coal: "K√∂m√ºr",
                val_river_gravel: "Dere √áakƒ±lƒ±",
                lbl_other_material: "Diƒüer malzeme (L√ºtfen belirtiniz)",
                th_tech_param: "Teknik Parametre",
                th_value: "Deƒüer",
                td_spec_density: "√ñzg√ºl Aƒüƒ±rlƒ±k",
                td_bulk_density: "Yƒ±ƒüƒ±n Yoƒüunluƒüu",
                td_impact_index: "Darbe ƒ∞≈ü Endeksi (Bond)",
                td_abrasion_index: "A≈üƒ±nma Endeksi",
                td_moisture: "Aƒüƒ±rlƒ±k√ßa Nem Oranƒ± (%)",
                td_others: "Diƒüer",
                lbl_extraction: "√áƒ±karma Y√∂ntemi",
                val_blasting: "Patlatma",
                val_ripped: "S√∂kme",
                val_recycling: "Geri D√∂n√º≈ü√ºm",
                lbl_condition: "Besleme Malzemesi Durumu",
                val_wet: "Islak",
                val_dry: "Kuru",
                val_clayed: "Killi",
                val_sticky: "Yapƒ±≈ükan",
                lbl_max_feed: "Maksimum Besleme Boyutu",
                lbl_feed_dist: "Besleme Boyutu Daƒüƒ±lƒ±mƒ±",
                th_mesh: "Elek Aralƒ±ƒüƒ±",
                th_passing: "Elek Altƒ±",
                sec_final: "Gerekli Nihai √úr√ºnler",
                th_prod_name: "√úr√ºn Adƒ±",
                th_size: "Boyut",
                th_capacity: "Kapasite",
                th_percentage: "Y√ºzde",
                th_shape: "√úr√ºn Kalitesi",
                sub_available: "Mevcutsa l√ºtfen deƒüerleri ekleyin",
                val_prod: "√úr√ºn",
                val_natural: "Doƒüal ƒ∞nce",
                val_required: "Gerekli",
                val_not_required: "Gerekli Deƒüil",
                lbl_comments: "Yorumlar / Notlar",
                btn_print: "Yazdƒ±r / PDF Kaydet",
                btn_submit: "Talebi G√∂nder",
                alert_select: "L√ºtfen en az bir se√ßenek se√ßiniz: ",
                alert_submit: "Form sim√ºlasyonu ba≈üarƒ±lƒ±.",
                msg_required: "L√ºtfen bu alanƒ± doldurun.",
                sub_if_available: "(Mevcutsa)",
                sub_specify_size: "L√ºtfen gerekli nihai √ºr√ºn boyutunu belirtin"
            },
            fr: {
                header_main_title: "Appel d'Offres",
                header_sub_title: "Installation de Concassage et Criblage",
                sec_customer: "D√©tails du Client",
                lbl_company: "Nom de l'Entreprise",
                lbl_project_name: "Nom du Projet",
                lbl_responsible: "Nom du Contact",
                lbl_phone: "T√©l√©phone",
                lbl_location: "Emplacement du Site",
                lbl_email: "Adresse E-mail",
                lbl_address: "Adresse Compl√®te",
                sec_scope: "Type de Projet et Mobilit√©",
                lbl_project_type: "Type de Projet",
                val_new_plant: "Nouvelle Installation",
                val_extension: "Extension d'Installation",
                val_renewal: "Renouvellement d'Installation",
                lbl_status_needs: "Veuillez d√©crire votre situation actuelle et vos besoins",
                lbl_mobility: "Mobilit√© du Projet",
                val_stationary: "Stationnaire",
                val_mobile: "Mobile-Roues",
                val_skid: "Sur Patins",
                sec_feed: "Caract√©ristiques du Mat√©riau d'Alimentation",
                val_granite: "Granite",
                val_limestone: "Calcaire",
                val_gabbro: "Gabbro",
                val_quartzite: "Quartzite",
                val_sandstone: "Gr√®s",
                val_dolomite: "Dolomie",
                val_diabase: "Diabase",
                val_marble: "Marbre",
                val_andesite: "And√©site",
                val_coal: "Charbon",
                val_river_gravel: "Gravier de Rivi√®re",
                lbl_other_material: "Autre mat√©riau (Veuillez pr√©ciser)",
                th_tech_param: "Param√®tre Technique",
                th_value: "Valeur",
                td_spec_density: "Densit√© Sp√©cifique",
                td_bulk_density: "Densit√© Apparente",
                td_impact_index: "Indice de Travail d'Impact (Bond)",
                td_abrasion_index: "Indice d'Abrasion",
                td_moisture: "% d'Humidit√© en Poids",
                td_others: "Autres",
                lbl_extraction: "M√©thode d'Extraction",
                val_blasting: "Sautage",
                val_ripped: "Ripper",
                val_recycling: "Recyclage",
                lbl_condition: "√âtat du Mat√©riau d'Alimentation",
                val_wet: "Humide",
                val_dry: "Sec",
                val_clayed: "Argileux",
                val_sticky: "Collant",
                lbl_max_feed: "Taille Max d'Alimentation",
                lbl_feed_dist: "Distribution de la Taille d'Alimentation",
                th_mesh: "Taille de Maille",
                th_passing: "Passant",
                sec_final: "Produits Finaux Requis",
                th_prod_name: "Nom du Produit",
                th_size: "Taille",
                th_capacity: "Capacit√©",
                th_percentage: "Pourcentage",
                th_shape: "Qualit√© du Produit",
                sub_available: "Veuillez ajouter les valeurs si disponibles",
                val_prod: "Produit",
                val_natural: "Fin Naturel",
                val_required: "Requis",
                val_not_required: "Non Requis",
                lbl_comments: "Commentaires",
                btn_print: "Imprimer / Enregistrer PDF",
                btn_submit: "Envoyer la Demande",
                alert_select: "Veuillez s√©lectionner au moins une option pour: ",
                alert_submit: "Simulation de formulaire r√©ussie.",
                msg_required: "Veuillez remplir ce champ.",
                sub_if_available: "(Si disponible)",
                sub_specify_size: "Veuillez sp√©cifier la taille du produit final requis"
            },
            es: {
                header_main_title: "Solicitud de Propuesta",
                header_sub_title: "Planta de Trituraci√≥n y Clasificaci√≥n",
                sec_customer: "Detalles del Cliente",
                lbl_company: "Nombre de la Empresa",
                lbl_project_name: "Nombre del Proyecto",
                lbl_responsible: "Nombre de Contacto",
                lbl_phone: "Tel√©fono",
                lbl_location: "Ubicaci√≥n del Sitio",
                lbl_email: "Correo Electr√≥nico",
                lbl_address: "Direcci√≥n Completa",
                sec_scope: "Tipo de Proyecto y Movilidad",
                lbl_project_type: "Tipo de Proyecto",
                val_new_plant: "Nueva Planta",
                val_extension: "Extensi√≥n de Planta",
                val_renewal: "Renovaci√≥n de Planta",
                lbl_status_needs: "Por favor, describa su situaci√≥n actual y sus necesidades",
                lbl_mobility: "Movilidad del Proyecto",
                val_stationary: "Estacionaria",
                val_mobile: "M√≥vil-Ruedas",
                val_skid: "Montada sobre Skids",
                sec_feed: "Caracter√≠sticas del Material de Alimentaci√≥n",
                val_granite: "Granito",
                val_limestone: "Caliza",
                val_gabbro: "Gabro",
                val_quartzite: "Cuarcita",
                val_sandstone: "Arenisca",
                val_dolomite: "Dolomita",
                val_diabase: "Diabasa",
                val_marble: "M√°rmol",
                val_andesite: "Andesita",
                val_coal: "Carb√≥n",
                val_river_gravel: "Grava de R√≠o",
                lbl_other_material: "Otro material (Por favor especifique)",
                th_tech_param: "Par√°metro T√©cnico",
                th_value: "Valor",
                td_spec_density: "Densidad Espec√≠fica",
                td_bulk_density: "Densidad Aparente",
                td_impact_index: "√çndice de Trabajo de Impacto (Bond)",
                td_abrasion_index: "√çndice de Abrasi√≥n",
                td_moisture: "% de Humedad por Peso",
                td_others: "Otros",
                lbl_extraction: "M√©todo de Extracci√≥n",
                val_blasting: "Voladura",
                val_ripped: "Ripper",
                val_recycling: "Reciclaje",
                lbl_condition: "Estado del Material de Alimentaci√≥n",
                val_wet: "H√∫medo",
                val_dry: "Seco",
                val_clayed: "Arcilloso",
                val_sticky: "Pegajoso",
                lbl_max_feed: "Tama√±o M√°ximo de Alimentaci√≥n",
                lbl_feed_dist: "Distribuci√≥n del Tama√±o de Alimentaci√≥n",
                th_mesh: "Tama√±o de Malla",
                th_passing: "Pasante",
                sec_final: "Productos Finales Requeridos",
                th_prod_name: "Nombre del Producto",
                th_size: "Tama√±o",
                th_capacity: "Capacidad",
                th_percentage: "Porcentaje",
                th_shape: "Calidad del Producto",
                sub_available: "Por favor agregue los valores si est√°n disponibles",
                val_prod: "Producto",
                val_natural: "Fino Natural",
                val_required: "Requerido",
                val_not_required: "No Requerido",
                lbl_comments: "Comentarios",
                btn_print: "Imprimir / Guardar PDF",
                btn_submit: "Enviar Solicitud",
                alert_select: "Por favor seleccione al menos una opci√≥n para: ",
                alert_submit: "Simulaci√≥n de formulario exitosa.",
                msg_required: "Por favor complete este campo.",
                sub_if_available: "(Si est√° disponible)",
                sub_specify_size: "Por favor especifique el tama√±o del producto final requerido"
            },
            ar: {
                header_main_title: "ÿ∑ŸÑÿ® ÿπÿ±ÿ∂ ÿ≥ÿπÿ±",
                header_sub_title: "ŸÖÿ≠ÿ∑ÿ© ÿßŸÑÿ™ŸÉÿ≥Ÿäÿ± ŸàÿßŸÑÿ∫ÿ±ÿ®ŸÑÿ©",
                sec_customer: "ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÖŸäŸÑ",
                lbl_company: "ÿßÿ≥ŸÖ ÿßŸÑÿ¥ÿ±ŸÉÿ©",
                lbl_project_name: "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                lbl_responsible: "ÿßÿ≥ŸÖ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ",
                lbl_phone: "ÿßŸÑŸáÿßÿ™ŸÅ",
                lbl_location: "ŸÖŸàŸÇÿπ ÿßŸÑŸÖŸàŸÇÿπ",
                lbl_email: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                lbl_address: "ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑŸÉÿßŸÖŸÑ",
                sec_scope: "ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ŸàÿßŸÑÿ™ŸÜŸÇŸÑ",
                lbl_project_type: "ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                val_new_plant: "ŸÖÿ≠ÿ∑ÿ© ÿ¨ÿØŸäÿØÿ©",
                val_extension: "ÿ™Ÿàÿ≥ÿπÿ© ÿßŸÑŸÖÿ≠ÿ∑ÿ©",
                val_renewal: "ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑŸÖÿ≠ÿ∑ÿ©",
                lbl_status_needs: "Ÿäÿ±ÿ¨Ÿâ ŸàÿµŸÅ Ÿàÿ∂ÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä Ÿàÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ",
                lbl_mobility: "ŸÜŸÇŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                val_stationary: "ÿ´ÿßÿ®ÿ™",
                val_mobile: "ŸÖÿ™ŸÜŸÇŸÑ ÿπŸÑŸâ ÿπÿ¨ŸÑÿßÿ™",
                val_skid: "ŸÖÿ±ŸÉÿ® ÿπŸÑŸâ ŸÇÿßÿπÿØÿ©",
                sec_feed: "ÿÆÿµÿßÿ¶ÿµ ŸÖÿßÿØÿ© ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©",
                val_granite: "ÿ¨ÿ±ÿßŸÜŸäÿ™",
                val_limestone: "ÿ≠ÿ¨ÿ± ÿ¨Ÿäÿ±Ÿä",
                val_gabbro: "ÿ∫ÿßÿ®ÿ±Ÿà",
                val_quartzite: "ŸÉŸàÿßÿ±ÿ™ÿ≤Ÿäÿ™",
                val_sandstone: "ÿ≠ÿ¨ÿ± ÿ±ŸÖŸÑŸä",
                val_dolomite: "ÿØŸàŸÑŸàŸÖŸäÿ™",
                val_diabase: "ÿØŸäÿßÿ®ÿßÿ≤",
                val_marble: "ÿ±ÿÆÿßŸÖ",
                val_andesite: "ÿ¢ŸÜÿØŸäÿ≤Ÿäÿ™",
                val_coal: "ŸÅÿ≠ŸÖ",
                val_river_gravel: "ÿ≠ÿµŸâ ÿßŸÑŸÜŸáÿ±",
                lbl_other_material: "ŸÖÿßÿØÿ© ÿ£ÿÆÿ±Ÿâ (Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ÿØŸäÿØ)",
                th_tech_param: "ÿßŸÑŸÖÿπŸÑŸÖÿ© ÿßŸÑÿ™ŸÇŸÜŸäÿ©",
                th_value: "ÿßŸÑŸÇŸäŸÖÿ©",
                td_spec_density: "ÿßŸÑŸÉÿ´ÿßŸÅÿ© ÿßŸÑŸÜŸàÿπŸäÿ©",
                td_bulk_density: "ÿßŸÑŸÉÿ´ÿßŸÅÿ© ÿßŸÑÿ∏ÿßŸáÿ±Ÿäÿ©",
                td_impact_index: "ŸÖÿ§ÿ¥ÿ± ÿπŸÖŸÑ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± (ÿ®ŸàŸÜÿØ)",
                td_abrasion_index: "ŸÖÿ§ÿ¥ÿ± ÿßŸÑŸÉÿ¥ÿ∑",
                td_moisture: "ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ±ÿ∑Ÿàÿ®ÿ© ÿ®ÿßŸÑŸàÿ≤ŸÜ",
                td_others: "ÿ£ÿÆÿ±Ÿâ",
                lbl_extraction: "ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨",
                val_blasting: "ÿßŸÑÿ™ŸÅÿ¨Ÿäÿ±",
                val_ripped: "ÿßŸÑÿ™ŸÖÿ≤ŸäŸÇ",
                val_recycling: "ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿØŸàŸäÿ±",
                lbl_condition: "ÿ≠ÿßŸÑÿ© ŸÖÿßÿØÿ© ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©",
                val_wet: "ÿ±ÿ∑ÿ®",
                val_dry: "ÿ¨ÿßŸÅ",
                val_clayed: "ÿ∑ŸäŸÜŸä",
                val_sticky: "ŸÑÿ≤ÿ¨",
                lbl_max_feed: "ÿ£ŸÇÿµŸâ ÿ≠ÿ¨ŸÖ ŸÑŸÑÿ™ÿ∫ÿ∞Ÿäÿ©",
                lbl_feed_dist: "ÿ™Ÿàÿ≤Ÿäÿπ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©",
                th_mesh: "ŸÅÿ™ÿ≠ÿ© ÿßŸÑŸÖŸÜÿÆŸÑ (Hole Size)",
                th_passing: "ÿßŸÑŸÖÿßÿ± (ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ©)",
                sec_final: "ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©",
                th_prod_name: "ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨",
                th_size: "ÿßŸÑÿ≠ÿ¨ŸÖ",
                th_capacity: "ÿßŸÑÿ≥ÿπÿ©",
                th_percentage: "ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ¶ŸàŸäÿ©",
                th_shape: "ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨",
                sub_available: "Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÇŸäŸÖ ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖÿ™ŸàŸÅÿ±ÿ©",
                val_prod: "ŸÖŸÜÿ™ÿ¨",
                val_natural: "ŸÜÿßÿπŸÖ ÿ∑ÿ®ŸäÿπŸä",
                val_required: "ŸÖÿ∑ŸÑŸàÿ®",
                val_not_required: "ÿ∫Ÿäÿ± ŸÖÿ∑ŸÑŸàÿ®",
                lbl_comments: "ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™",
                btn_print: "ÿ∑ÿ®ÿßÿπÿ© / ÿ≠ŸÅÿ∏ PDF",
                btn_submit: "ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®",
                alert_select: "Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿÆŸäÿßÿ± Ÿàÿßÿ≠ÿØ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ ŸÑŸÄ: ",
                alert_submit: "ÿ™ŸÖÿ™ ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ®ŸÜÿ¨ÿßÿ≠.",
                msg_required: "Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° Ÿáÿ∞ÿß ÿßŸÑÿ≠ŸÇŸÑ.",
                sub_if_available: "(ÿ•ÿ∞ÿß ÿ™ŸàŸÅÿ±)",
                sub_specify_size: "Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ÿØŸäÿØ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ÿßŸÑŸÖÿ∑ŸÑŸàÿ®"
            }
        };

        let isSubmitting = false;

        let currentLang = 'en';
        let currentUnitSystem = 'metric';

        const units = {
            metric: {
                mm: '(mm)',
                density: '(t/m¬≥)',
                capacity: '(mtph)'
            },
            imperial: {
                mm: '(inch)',
                density: '(lb/ft¬≥)',
                capacity: '(stph)'
            }
        };

        function setUnitSystem(system) {
            currentUnitSystem = system;
            document.querySelectorAll('.unit-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('onclick').includes(`'${system}'`));
            });
            document.querySelectorAll('.unit[data-unit]').forEach(el => {
                const unitType = el.getAttribute('data-unit');
                if (units[system][unitType]) {
                    el.textContent = units[system][unitType];
                }
            });
        }

        function setLanguage(lang) {
            currentLang = lang;
            document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('onclick').includes(`'${lang}'`));
            });
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    let foundText = false;
                    el.childNodes.forEach(node => {
                        if (node.nodeType === Node.TEXT_NODE && node.textContent.trim() !== "") {
                            node.textContent = translations[lang][key];
                            foundText = true;
                        }
                    });
                    if (!foundText && el.children.length === 0) {
                        el.textContent = translations[lang][key];
                    }
                }
            });
            updateValidationMessages(lang);
        }

        function updateValidationMessages(lang) {
            const msg = translations[lang]?.msg_required || "";
            document.querySelectorAll('input[required], textarea[required], select[required]').forEach(el => {
                if (el.value === "") {
                    el.setCustomValidity(msg);
                } else {
                    el.setCustomValidity("");
                }
            });
        }

        document.addEventListener('input', (e) => {
            if (e.target.hasAttribute('required')) {
                e.target.setCustomValidity("");
            }

            // Limit lines in specific textareas
            if (e.target.tagName === 'TEXTAREA' && e.target.hasAttribute('data-max-lines')) {
                const maxLines = parseInt(e.target.getAttribute('data-max-lines'));
                const lines = e.target.value.split('\n');
                if (lines.length > maxLines) {
                    e.target.value = lines.slice(0, maxLines).join('\n');
                }
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'TEXTAREA' && e.target.hasAttribute('data-max-lines')) {
                const maxLines = parseInt(e.target.getAttribute('data-max-lines'));
                const lines = e.target.value.split('\n');
                if (e.key === 'Enter' && lines.length >= maxLines) {
                    e.preventDefault();
                }
            }
        });

        document.getElementById('proposalForm').addEventListener('submit', function (e) {
            isSubmitting = true;
            // The existing submit listener on line 1161 handles the alert
            // Here we just ensure isSubmitting is true.
            // Actually, I replaced the original one too. Let's make it consistent.
        });

        window.addEventListener('beforeunload', function (e) {
            if (isSubmitting) return;
            const form = document.getElementById('proposalForm');
            if (!form) return;
            const inputs = form.querySelectorAll('input, textarea, select');
            let isDirty = false;
            for (const input of inputs) {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    if (input.checked) {
                        isDirty = true;
                        break;
                    }
                } else if (input.type !== 'submit' && input.type !== 'button') {
                    if (input.value.trim() !== "") {
                        isDirty = true;
                        break;
                    }
                }
            }
            if (isDirty) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);

        setLanguage('en');
        setUnitSystem('metric');
    </script>
</body>

</html>